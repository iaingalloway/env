[core]
  editor = nano
  commentChar = "-"
  eol = lf
  autocrlf = input

[user]
  name = Iain Galloway
  email = iain.galloway@gmail.com
  useConfigOnly = true

[github]
  user = iaingalloway

[includeIf "hasconfig:remote.*.url:**/*dev.azure.com*/menziesdistribution/**"]
  path = .config/git/menzies

[alias]
  a = add

  ai = add --interactive

  ap = add --patch

  b = branch

  ci = commit

  cm = commit --message

  cma = !git add --all && git commit --message

  co = checkout

  d = difftool

  f = fetch

  l = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'

  p = push

  pf = push --force-with-lease

  pushf = push --force-with-lease

  r = rebase

  s = status

  sh = show

  sw = switch

  swb = switch -

  t = tag -a --message=""

  unstage = reset HEAD

  # Append the currently staged files to the latest commit
  append = commit --amend --reuse-message=HEAD

  # Append the currently staged files to the latest commit and force push
  appendf = !git append && git pushf

  # Check if there are any changes in the working tree
  changes = !git has-commits && (git diff --quiet --cached && git diff-files --quiet && git ls-files --others --exclude-standard >/dev/null 2>&1 && echo 'Clean') || echo 'Dirty'

  # Get the name of the current branch
  current-branch = !git has-commits && git rev-parse --abbrev-ref HEAD || echo 'No commits'

  # Discard all changes to the working directory
  discard = !cd \"${GIT_PREFIX:-.}\" && git reset HEAD . -- && git restore -- . && git clean -fd .

  # Perform a git command in all each subdirectory of the current directory
  foreach-subdirectory = !ls -d */ | xargs -I{} git -C {}

  # Show the status of each subdirectory of the current directory
  foreach-subdirectory-status = foreach-subdirectory short-status

  # Work out if the repository has any commits
  has-commits = !git rev-parse --verify HEAD >/dev/null 2>&1

  # Work out the name of main branch
  main = !git symbolic-ref refs/remotes/origin/HEAD | sed 's@^refs/remotes/origin/@@'

  # Get the path to the root of the git repository
  pwd = !cd \"${GIT_PREFIX:-.}\" && pwd

  # Show a summary of status of the repository
  short-status = !echo && git pwd && git current-branch && git changes && git status --porcelain

  # Rebase on top of origin/main
  up = !git f && git rebase origin/$(git main)

  # Update timestamps of unpushed commits to the current time
  update-timestamps = !git rebase -x 'git commit --amend --no-edit --date=now' origin/$(git current-branch)

[fetch]
  prune = true
[init]
  defaultBranch = main
[pull]
  rebase = true
[push]
  autoSetupRemote = true
[rebase]
  abbreviateCommands = true
  autostash = true
  autosquash = true
